FROM golang:1.8.1-alpine
LABEL maintaner="Stegen Smith <matthsmi@adobe.com>

RUN mkdir -p /root/butler /root/go/src /root/butler/stats
COPY ./files/doit.sh /doit.sh
COPY ./files/build_test.sh /root/build.sh

COPY *.go /root/butler/
COPY ./config/*.go /root/butler/config/
COPY ./stats/*.go /root/butler/stats/
COPY ./vendor/github.com /root/go/src/github.com
COPY ./vendor/golang.org /root/go/src/golang.org
COPY ./vendor/gopkg.in /root/go/src/gopkg.in

RUN apk update && apk add bash git

CMD ["/doit.sh"]
